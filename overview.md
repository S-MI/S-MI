**2.****概述**

**2.1.****开始**

本部分旨在为您快速介绍 RoboCup 模拟器的主要组件。对于每个组件，您将在本手册中稍后找到详细信息（即配置参数、运行时间选项等）。

**2.1.1.****服务器**

服务器是一个系统，使不同的球队在足球比赛中竞争。由于比赛以客户端服务器风格进行，因此对团队的构建方式没有限制。唯一的要求是用于开发团队的工具通过 UDP/IP 支持客户端服务器通信。这是由于服务器和每个客户端之间的所有通信都是通过 UDP/IP 插座完成的。每个客户端是一个单独的过程，并通过指定的端口连接到服务器。玩家连接到服务器后，所有消息都通过此端口传输。一支球队最多可有12个客户，即11名球员（10名外野手+1名守门员）和一名教练。玩家向服务器发送有关他们想要执行的操作的请求（例如踢球、转身、跑步等）。服务器接收这些消息，处理请求，并相应地更新环境。此外，服务器还向所有玩家提供感官信息（例如，有关物体在场上位置的视觉数据，或有关玩家资源（如耐力或速度）的数据）。重要的是要提到，服务器是一个实时系统，工作与离散的时间间隔（或周期）。每个周期都有指定的持续时间，需要在给定周期中执行的操作必须在正确的间隔期间到达服务器。因此，导致缺少行动机会的球员表现缓慢，对整个团队的表现有重大影响。服务器的详细描述可以在章[足球服务器](https://rcsoccersim.github.io/manual/soccerserver.html#cha-soccerserver)中找到。

**2.1.2.****监视器**

足球监视器是一个可视化工具，让人们能够看到在比赛期间服务器内发生了什么。目前，显示器有两种风格，一种是__和__两个监视器上显示的信息包括比分、球队名称以及所有球员的位置和球。它们还提供与服务器的简单接口。例如，当两队都连接时，监视器上的"开球"按钮允许人工裁判开始比赛。它基于阿图尔~默克，扩展了经典显示器的功能，有几个功能。rcssmonitorrcssmonitor_classicrcssmonitorframeview

- 可以放大到字段的区域。这对于调试目的特别有用。
- 所有球员和球的当前位置和速度可以随时打印到控制台。
- 显示器上可以显示各种信息，例如玩家的视锥、耐力或（在异质玩家的情况下）玩家类型。
- 玩家和球可以用鼠标移动。

正如您稍后会发现的那样，要在服务器上运行游戏，不需要监视器。但是，如果需要，许多监视器可以同时连接到服务器（例如，如果您想在不同的终端上显示相同的游戏）。有关监视器的更多详细信息，请查看章[节足球监视器](https://rcsoccersim.github.io/manual/soccermonitor.html#cha-soccermonitor)。

**2.1.3.****日志播放器**

日志播放器可以被认为是一个视频播放器。它是用于重播比赛的工具。在运行服务器时，可以使用某些选项，导致服务器将所有数据存储在硬盘驱动器上的给定匹配。（非常喜欢按视频上的录制按钮）。然后，程序与显示器相结合，可以根据需要多次重播该游戏。这对于进行团队分析和发现团队的强项或弱项非常有用。很像一个视频播放器，日志播放器配备了播放，停止，快进和倒带按钮。此外，日志播放器允许您在游戏中跳转到特定周期（例如，如果您只想查看目标）。最后，日志播放器允许您编辑现有录制，即您可以将有趣的场景从匹配项（或几场比赛）保存到另一个日志文件，从而轻松创建演示文稿。rcsslogplayer

日志播放器可以通过一个小GUI或命令线接口进行控制。此外，还可以从文件中读取命令，这为日志播放器增加了有限的脚本功能。

**2.1.4.****演示客户端**

捆绑与RoboCup足球模拟器是一个程序称为，它实现了一个非常原始的文本为基础的客户端的模拟。这个节目的目的是让你首先了解整个事件是如何运作的。rcssclient

启动后，它将连接到服务器。您将收到一个简单的基于 ncurses 的界面。然后，您可以输入由服务器执行的命令。客户收到的任何信息将根据屏幕的类型（视觉、感应身体或其他）显示在屏幕的不同部分。通过输入命令并查看会发生什么，您可以首先了解模拟中事物的工作方式。即使您不再是新手，该程序对于简单的测试也非常方便，例如，在模拟中加入新命令。rcssclient

**2.2.****游戏规则**

在比赛中，许多规则要么由服务器内的自动裁判执行，要么由人工裁判执行。本节的目的是描述这些规则的工作原理，以及它们如何影响游戏。

**2.2.1.****由自动裁判判断的规则**

**开球**

开球前（要么在半场开始前，要么进球后），所有球员都必须在自己的半场。为了允许这种情况发生，在进球后，裁判暂停比赛5秒。在此间隔期间，玩家可以使用**移动**命令传送到自己一侧的位置，而不是移动到此位置，移动到该位置速度要慢得多，并且消耗耐力。如果球员在 5 秒间隔过期后留在对手半场，或在间隔期间试图传送到对方半场，则裁判会将玩家移到自己半场内的随机位置。

**目标**

当一个团队得分时，裁判执行许多任务。最初，它通过向所有玩家广播消息来宣布目标。它还更新比分，将球移动到中心标记，并将播放模式更改为kick_off_x（其中 x 是左或右）。最后，它暂停比赛5秒，允许玩家回到自己的半场（如上文所述的"开球"部分）。

**出场**

当球离开球场时，裁判将球移到适当的位置（触线、角球或球门区），并将比赛模式更改为kick_in、corner_kick或goal_kick。在角球的情况下，裁判将球放在（1米，1米）的适当角球内。

**玩家间隙**

当游戏模式kick_off、free_kick、kick_in或corner_kick时，裁判会移除位于以球为中心的圆圈内的所有防守球员。此圆的半径是服务器内的参数（通常为 9.15 米）。被移除的玩家被放置在该圆圈的外围。当游戏模式越位时，所有违规玩家将移回非越位位置。在这种情况下，违规球员都是场外区域的球员，以及距离球半径9.15米的圆圈内的所有球员。当游戏模式goal_kick时，所有违规球员都移出罚球区。进球时，违规球员不能重新进入罚球区。球出罚球区后，比赛模式立即更改为play_on。

**游戏模式控制**

当游戏模式kick_off、free_kick、kick_in或corner_kick时，裁判在球开始通过**踢法**命令移动后立即将游戏模式更改为play_on。

**越位**

玩家被标记为越位，如果是在对手的半场，比至少两名防守球员更接近对手的目标，比球更接近对手的目标，更接近球超过2.5米（这可以改变与服务器参数**服务器****::offside_active_area_size****）。**

**回传**

就像在真正的足球比赛中一样，守门员不允许接住队友传给他的球。如果发生这种情况，裁判会叫**back_pass_l**或**back_pass_r****，**并将任意球传给对方。由于这样的后传只能发生在罚球区内，因此球被放置在离守门员试图抓住的位置最近的罚球区一角。请注意，如果守门员不尝试接球，将球传给守门员是完全合法的。

**任意球故障**

当获得任意球、角球、守门员任意球或踢入时，球员不得将球传给自己。如果球员在执行其中一个任意球后再次踢球，裁判会叫**free_kick_fault_l**或**free_kick_fault_r****，**对手将获得free_kick。

由于球员可能需要多次踢球才能将球加速到预期的速度，因此只有在球员获得任意球时才会出现任意球故障。

1. 是第一个再次踢球的球员，
2. 玩家在踢之间移动（=**猛冲**）。

因此，发出命令序列，如**踢**-**踢**-**冲**或**踢**-**转**-**踢**是完全合法的。顺序**踢**-**冲**-**踢**，另一方面，导致一个任意球故障。

**半场和超时**

上半场或下半场结束时，裁判暂停比赛。每半部分的默认长度为 3000 个模拟周期（约 5 分钟）。如果比赛在下半场后进行，比赛将延长。加时赛一直持续到进球。在加时赛中打进第一个球的球队赢得了比赛。这也被称为"黄金点球"规则或"突然死亡"。

**2.2.2.****由人类裁判判定的规则**

像"障碍物"这样的犯规很难自动判断，因为它们与球员的意图有关。为了解决此类情况，服务器提供了一个用于人工干预的接口。这样，一个人的裁判可以暂停比赛，给任何一支球队任意球。以下是在 RoboCup 2000 比赛之前商定的准则，但自那时以来一直使用这些准则。

- 围绕球
- 用太多的玩家阻止目标
- 在给定数个周期后不把球放到球上。现在这个规则也由自动裁判处理。如果一支球队不能将球放回**赛场进行伺服器**::**drop_ball_****时间**周期，则裁判会发出drop_ball。但是，如果一个团队屡次未能将球投入比赛，人工裁判可能会过早地将球投下。
- 故意阻止其他玩家的移动
- 滥用守门员**接球**命令（守门员不得反复踢球和接球，因为这样可以安全地将球移动到罚球区内的任何地方）。
- 向服务器发送消息：玩家每个模拟周期向足球服务器发送的命令不应超过 3 或 4 次。如果服务器卡住，或在游戏结束后应要求，可能会检查滥用行为。
- 不当行为：如果观察到球员以不恰当的方式干扰比赛，人类裁判可以暂停比赛，并给予对方一个任意球。

 